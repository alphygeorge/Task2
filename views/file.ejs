<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <title>Files</title>
</head>

<body>
    <%- include('./partials/nav') %>

        <div class="container mt-5">
            <form action="/file/add-file" method="POST" class="d-flex" enctype="multipart/form-data">
                <label>Choose only pdf/doc/docx/txt/jpg/jpeg/png</label>
                
                <input type="file" class="form-control" id="fileupload" name="fileupload" aria-describedby="fileupload"
                    accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png" onchange="validateFileSize(this)">

                <input type="submit" value="Add File " class="btn btn-md btn-primary mx-2">
                <label>Choose only files below 10MB</label>
            </form>
        </div>

        <%- include('./partials/scripts') %>

            <script>
                function validateFileSize(input) {
                    if (input.files && input.files[0]) {
                        const maxSize = 10 * 1024 * 1024; // 10MB in bytes
                        const fileSize = input.files[0].size;

                        if (fileSize > maxSize) {
                            alert("File size exceeds the maximum limit (10MB). Please select a smaller file.");
                            input.value = ''; // Clear the file input to allow the user to select a new file
                        }
                    }
                }
            </script>
</body>

</html>
